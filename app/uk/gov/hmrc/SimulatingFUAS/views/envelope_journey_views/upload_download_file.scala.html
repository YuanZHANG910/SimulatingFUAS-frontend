@import uk.gov.hmrc.SimulatingFUAS.controllers.routes

@(id: String, uploadMessage: String, downLoadMessage: String, routingMessage: String)(implicit request: Request[_], messages: Messages)

@uk.gov.hmrc.SimulatingFUAS.views.html.main_template(title = "SimulatingFUAS-frontend", mainClass = Some("full-width")) {

  @uk.gov.hmrc.SimulatingFUAS.views.html.envelope_journey_views.file_manage_template(id, uploadMessage)

  <br>

  <h3>
    Your may download or delete a file:<br>
    If you can not please check your callback or view the Envelope or view files in progress on the top.<br>
  </h3>

  <h4>
    Download Request(GET): http://localhost:8898/file-upload/envelopes/{{envelopeId}}/files/{{fileId}}/content<br>
    Delete Request(DELETE): http://localhost:8898/file-upload/envelopes/{{envelopeId}}/files/{{fileId}}/content
  </h4>

  <h4 style="color:royalblue;">
    @downLoadMessage <br>
  </h4>

  @helper.form(routes.NewEnvelopesController.downloadOrDeleteFiles(id)) {

    @helper.CSRF.formField

    <h4>
      Please enter your fileId
    </h4>

    <input name="fileId" style="width: 510px;" type="text" placeholder="usually it is the file's name">

    <button name="action" type="text" value="download">Download</button>
    <button name="action" type="text" value="delete">Delete</button>
  }

  <br>

  <h3>
    Create Envelop Routing Request:
  </h3>
  <h4>
    Changes the status of an envelope to CLOSED and auto generates a routing Id. The status change,
    rejects any requests to add files to the envelope. This makes it available for file transfer.
    To make the request, the envelope Id, application and destination must be provided.
    A response is provided in the Location Header with a link and a new autogenerated routing Id.
    In regards to MVP, only DMS is supported.<br>
  </h4>
  Example Request(POST): localhost:8898/file-routing/requests<br>

  @helper.form(routes.NewEnvelopesController.routeAnEnvelope(id)) {

    @helper.CSRF.formField

    <h4 style="color:royalblue;">
      @routingMessage <br>
    </h4>

    <pre>
      <textarea rows="5" cols="60" name="body">
        {
        "envelopeId": "@{id}",
        "application":"application/json",
        "destination":"DMS"
        }
      </textarea>
    </pre>

    <button name="action" type="text" value="download">Submit Routing Request</button>
  }
}